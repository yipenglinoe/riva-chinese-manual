二： Riva快速入门指南

NVIDIA® Riva Speech Skills 快速入门指南是试用 Riva 的起点；具体来说，本指南使您能够在本地工作站上快速部署预训练模型并运行客户端示例。

Riva Speech Skills 支持两种架构，Linux x86_64 和 Linux ARM64。这些在本文档中被称为数据中心 (x86_64) 和嵌入式 (ARM64)。

先决条件
在使用 Riva 技能之前，请确保您满足以下先决条件：

DATA CENTER数据中心
1 您可以访问并登录到 NVIDIA NGC。有关分步说明，请参阅 NGC 入门指南。

2 您可以使用Linux x86_64架构的操作系统和NVIDIA Volta™、NVIDIA Turing™ 或基于 NVIDIA Ampere 架构的 A100 GPU。
下表显示了 Riva Speech Skills 2.1.0 在数据中心平台上支持的硬件。详情请参考：Support Matrix — NVIDIA Riva Skills
•	NVIDIA Volta V100
•	NVIDIA Turing T4
•	NVIDIA A100 GPU
•	NVIDIA A30 GPU

3 您安装了支持 NVIDIA GPU 的 Docker。详情请参阅Support Matrix — NVIDIA Riva Skills

  
可供部署的模型  
有两种方式可以使用NGC目录中所提供的预训练模型来部署Riva技能:  
 
1 本地化Docker: 您可以使用快速入门脚本结合Docker部署Riva服务。 继续本指南，使用快速入门脚本。  
 
2 Kubernetes: Riva Helm Chart设计用于自动化Kubernetes集群的按钮部署步骤。 有关更多信息，请参阅安装。 嵌入式不支持此选项。  
 
除了使用预先训练的模型，Riva技能可以使用NVIDIA TAO工具包运行微调自定义模型。 有关使用TAO Toolkit创建模型存储库的高级选项的详细信息，请参阅使用TAO Toolkit进行模型开发一节。Overview — NVIDIA Riva Skills

本地快速启动脚本部署  
Riva包括快速启动脚本，以帮助您快速开始使用Riva技能。 这些脚本用于本地部署服务、测试和运行示例应用程序。  
 针对于DATA CENTER数据中心平台：
可以使用NGC的CLI工具从命令行下载快速启动脚本，指令如下：  
 
1初始化并启动Riva。
 进入快速启动脚本目录中 
 
初始化步骤将会下载并准备Docker映像和模型， start命令启动服务器。  
 
对于数据中心平台，为每个服务启动都带有示例客户端的客户端容器。可以通过以下命令开启客户端：
 

注意：此过程最多可能需要一个小时。在数据中心平台上，每个模型在下载后都针对目标 GPU 进行了单独优化。在嵌入式平台上，会下载 NVIDIA Jetson 上 GPU 的预优化模型。

针对于嵌入式平台：
可以使用NGC的CLI工具从命令行下载快速启动脚本，指令如下：  
 
切换至快速启动脚本目录中：
 
注意：若要将 USB 设备用于音频输入/输出，请将其连接到 Jetson 平台，以便它自动安装到容器中。
初始化步骤将会下载并准备Docker镜像和模型， start命令启动服务器。  
 
对于嵌入式，不需要bash riva_start_client.sh此步骤，因为示例客户端已经存在于上一步中所启动的 Riva 服务器的容器当中。

从客户端容器（数据中心）或服务器容器（嵌入式）内部，都可以使用容器所提供的 Jupyter 笔记本尝试不同的服务。并通过以下指令开启jupyter notebook使用脚本案例。
 

如果在云服务提供商（例如 AWS 或 GCP）上运行 Riva 快速启动脚本，请确保您的计算实例具有外部可见的 IP 地址。要运行 Jupyter 笔记本，请将浏览器窗口连接到该外部 IP 地址的正确端口（默认为 8888）。
完成后关闭服务器。完成这些步骤并试验推理后，运行 riva_stop.sh 脚本用以停止服务器。
有关如何自定义本地部署的更多详细信息，请参阅本地 (Docker)Local (Docker) — NVIDIA Riva Skills




使用 Riva 转录音频文件
对于自动语音识别 (ASR)，从 Riva 客户端容器（数据中心）或 Riva 服务器容器（嵌入式）内部运行以下命令，以执行音频文件的流式传输和离线转录。如果使用 SSL/TLS，请确保包含 --ssl_server_cert /ssl/server.crt 选项。
1 进行离线语音识别指令：
 
2 进行流式语音识别指令：
 

使用 Riva 合成语音
在 Riva 客户端容器（数据中心）或 Riva 服务器容器（嵌入式）中，运行以下命令来合成音频文件。命令行案例如下：
 
注意：
--voice_name:选择语音合成的声音样本
--text：指定需要进行语音合成的文字
--audio_file: 合成出来的音频文件output.wav存储在 /work/wav 目录中。

下一步¶
在本快速入门指南中，您了解到了使用预训练模型部署 Riva 服务器和使用 API 的基础知识。具体来说，您：
安装 Riva 服务器和预训练模型
通过 Jupyter 笔记本使用 Riva API
执行 Riva 命令行客户端以转录音频并将文本合成为语音
有关如何在实际应用中使用 Riva 技能的更多示例，您可以关注虚拟助手演示Virtual Assistant (with Google Dialogflow) — NVIDIA Riva Skills以了解如何使用 API。您可以使用 gRPC gRPC & Protocol Buffers — NVIDIA Riva Skills、Python 库Python — NVIDIA Riva Skills和命令行客户端等可用 API Command-line Clients — NVIDIA Riva Skills使用 Riva 构建自己的语音 AI 应用程序。
要了解有关 Riva 技能的更多信息，请访问 NVIDIA Riva 开发者主页NVIDIA Riva | NVIDIA Developer。

